{%- extends 'classic/index.html.j2' -%}

{% block ipywidgets %}
{%- if "widgets" in nb.metadata -%}
  {%- if resources.illusionist_devmode -%}
      <script src="./static/embed-amd.js"></script>
  {%- else -%}
      <script>{{ include_template("./static/embed-amd.js") }}</script>
  {%- endif -%}
{%- endif -%}
{% endblock ipywidgets %}


{%- block footer %}
{{ super() }}

{% set mimetype = "application/vnd.illusionist.widget-onchange+json" %}
{% if mimetype in nb.metadata.get("widgets", {}) %}
<script type="{{ mimetype }}">
{{ nb.metadata.widgets[mimetype] | json_dumps }}
</script>
{% endif %}
{%- endblock footer-%}
